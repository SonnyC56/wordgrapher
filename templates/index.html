<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Grapher - Convert Text to ASCII Graph</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .ad-space {
            background-color: #f8f9fa;
            padding: 15px;
            text-align: center;
            min-height: 100vh;
            position: fixed;
            width: 200px;
            top: 0;
        }
        .ad-space-left {
            left: 0;
        }
        .ad-space-right {
            right: 0;
        }
        .main-content {
            margin: 0 220px;
        }
        #graphContainer, #lineOnlyContainer {
            display: none;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <!-- Left Ad Space -->
    <div class="ad-space ad-space-left">
        <!-- Google AdSense Code Would Go Here -->
        <div id="left-ad">Advertisement Space</div>
    </div>

    <!-- Right Ad Space -->
    <div class="ad-space ad-space-right">
        <!-- Google AdSense Code Would Go Here -->
        <div id="right-ad">Advertisement Space</div>
    </div>

    <div class="main-content mt-5">
        <h1 class="text-center mb-4">Word Grapher</h1>
        <div class="text-center mb-4">
            <a href="circular.html" class="btn btn-outline-primary me-2">Try Circular Visualization</a>
            <a href="binary.html" class="btn btn-outline-primary">Try Binary Visualization</a>
        </div>

        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="text" class="form-label">Enter your text:</label>
                            <textarea class="form-control" id="text" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="tension" class="form-label">Line Smoothness:</label>
                            <input type="range" class="form-control" id="tension" min="0" max="1" step="0.1" value="0.1">
                        </div>
                    </div>
                </div>

                <div id="graphContainer" class="card mt-4 mb-4">
                    <div class="card-body">
                        <p class="mb-3">Original text: <strong id="originalText"></strong></p>
                        <div class="text-center">
                            <canvas id="asciiGraph"></canvas>
                        </div>
                    </div>
                </div>

                <div id="lineOnlyContainer" class="card mt-4">
                    <div class="card-body">
                        <div class="text-center">
                            <canvas id="lineOnlyGraph"></canvas>
                            <div class="mt-3">
                                <button onclick="downloadGraph()" class="btn btn-success">Download Full Graph</button>
                                <button onclick="downloadLineOnly()" class="btn btn-info">Download Line Only</button>
                                <button onclick="resetForm()" class="btn btn-primary">Create Another Graph</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let chart = null;

        function updateGraph() {
            const text = document.getElementById('text').value;
            if (!text) {
                if (chart) {
                    chart.destroy();
                    chart = null;
                }
                document.getElementById('graphContainer').style.display = 'none';
                return;
            }

            const asciiValues = Array.from(text.toLowerCase()).map(char => char.charCodeAt(0));
            const labels = Array.from({length: asciiValues.length}, (_, i) => i + 1);
            const tension = parseFloat(document.getElementById('tension').value);

            const ctx = document.getElementById('asciiGraph').getContext('2d');
            
            if (!chart) {
                document.getElementById('graphContainer').style.display = 'block';
                document.getElementById('lineOnlyContainer').style.display = 'block';

            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'ASCII Values',
                        data: asciiValues,
                        borderColor: 'rgb(75, 192, 192)',
                        tension: tension,
                        pointRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            suggestedMin: Math.min(...asciiValues) * 0.9,
                            suggestedMax: Math.max(...asciiValues) * 1.1,
                            title: {
                                display: true,
                                text: 'ASCII Value'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Character Position'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'ASCII Value Graph'
                        }
                    }
                }
            });

            // Create line-only chart
            const lineOnlyCtx = document.getElementById('lineOnlyGraph').getContext('2d');
            if (window.lineOnlyChart) {
                window.lineOnlyChart.destroy();
            }
            window.lineOnlyChart = new Chart(lineOnlyCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        data: asciiValues,
                        borderColor: 'rgb(75, 192, 192)',
                        tension: tension,
                        pointRadius: 0,
                        borderWidth: 3,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            display: false
                        },
                        y: {
                            display: false
                        }
                    }
                }
            });

            document.getElementById('originalText').textContent = text;
            } else {
                // Update existing chart
                chart.data.labels = labels;
                chart.data.datasets[0].data = asciiValues;
                chart.data.datasets[0].tension = tension;
                chart.update();
                
                // Update line-only chart
                window.lineOnlyChart.data.labels = labels;
                window.lineOnlyChart.data.datasets[0].data = asciiValues;
                window.lineOnlyChart.data.datasets[0].tension = tension;
                window.lineOnlyChart.update();
            }
        }

        function downloadGraph() {
            const link = document.createElement('a');
            link.download = 'word_graph.png';
            link.href = document.getElementById('asciiGraph').toDataURL('image/png');
            link.click();
        }

        function downloadLineOnly() {
            const link = document.createElement('a');
            link.download = 'word_graph_line_only.png';
            link.href = document.getElementById('lineOnlyGraph').toDataURL('image/png');
            link.click();
        }

        // Add event listeners for real-time updates
        document.getElementById('text').addEventListener('input', updateGraph);
        document.getElementById('tension').addEventListener('input', updateGraph);

        function resetForm() {
            document.getElementById('text').value = '';
            document.getElementById('graphContainer').style.display = 'none';
            if (chart) {
                chart.destroy();
                chart = null;
            }
            if (window.lineOnlyChart) {
                window.lineOnlyChart.destroy();
                window.lineOnlyChart = null;
            }
            document.getElementById('lineOnlyContainer').style.display = 'none';
        }
    </script>
</body>
</html>
